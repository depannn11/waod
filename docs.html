<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dinzo Apis - Docs</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'mono': ['JetBrains Mono', 'monospace'],
                        'sans': ['Plus Jakarta Sans', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(0, 0, 0, 0.1); border-radius: 10px; }
        
        body { 
            background: #ffffff;
            background-image: 
                radial-gradient(at 0% 0%, rgba(59, 130, 246, 0.05) 0px, transparent 50%),
                radial-gradient(at 100% 100%, rgba(147, 51, 234, 0.05) 0px, transparent 50%);
            color: #000000; 
            min-height: 100vh;
            padding-bottom: 120px;
        }

        .floating-nav {
            position: fixed;
            bottom: 24px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(20px);
            padding: 8px;
            border-radius: 24px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .nav-item {
            padding: 10px 18px;
            border-radius: 18px;
            color: rgba(255, 255, 255, 0.4);
            font-size: 10px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-item:hover { color: #ffffff; background: rgba(255, 255, 255, 0.05); }
        .nav-item.active { background: #ffffff; color: #000000; }

        .neo-card {
            background: rgba(0, 0, 0, 0.01);
            border: 1px solid rgba(0, 0, 0, 0.06);
            border-radius: 2rem;
            transition: all 0.4s ease;
        }

        .neo-card:hover { border-color: rgba(0, 0, 0, 0.15); }

        .method-badge {
            font-size: 9px;
            font-weight: 800;
            padding: 4px 10px;
            border-radius: 6px;
        }

        .get-badge { background: #eff6ff; color: #2563eb; }
        .post-badge { background: #ecfdf5; color: #059669; }

        .category-pill {
            background: rgba(0, 0, 0, 0.03);
            border: 1px solid rgba(0, 0, 0, 0.05);
            padding: 10px 20px;
            border-radius: 12px;
            font-size: 9px;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
        }

        .category-pill.active { background: #000; color: #fff; }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-item { animation: slideIn 0.5s ease forwards; }
    </style>
</head>
<body class="font-sans antialiased">

    <nav class="floating-nav">
        <a href="/" class="nav-item">
            <i class="material-icons">home</i>
            <span class="hidden md:block">Home</span>
        </a>
        <a href="/docs" class="nav-item active">
            <i class="material-icons">description</i>
            <span class="hidden md:block">Docs</span>
        </a>
        <a href="/legal" class="nav-item">
            <i class="material-icons">gavel</i>
            <span class="hidden md:block">Legal</span>
        </a>
        <div class="w-[1px] h-6 bg-white/10 mx-1"></div>
        <a href="/dev" class="nav-item">
            <i class="material-icons text-blue-400">account_circle</i>
            <span class="hidden md:block text-blue-400">Dev</span>
        </a>
    </nav>

    <header class="h-20 flex items-center border-b border-black/5 bg-white/50 backdrop-blur-xl sticky top-0 z-40 px-6">
        <div class="max-w-7xl mx-auto w-full flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 bg-black rounded-lg flex items-center justify-center">
                    <i class="material-icons text-white text-lg">auto_stories</i>
                </div>
                <h1 class="font-black text-sm tracking-tighter uppercase">Dinzo Api's</h1>
            </div>
            <div class="text-[10px] font-bold text-black/40 bg-black/5 px-3 py-1 rounded-full border border-black/5">
                v2.0.4
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-6 py-12">
        <div class="mb-12">
            <h2 class="text-4xl md:text-6xl font-black tracking-tighter mb-4 text-black uppercase">Dinzo Api's <span class="text-black/20">Endepoint</span></h2>
            <p class="text-xs text-black/50 max-w-xl font-medium leading-relaxed uppercase tracking-wider">This endpoint api was created by the xte id developer team.</p>
        </div>

        <div class="flex flex-col md:flex-row gap-6 mb-10 items-start md:items-center">
            <div class="w-full md:w-80 relative">
                <i class="material-icons absolute left-4 top-1/2 -translate-y-1/2 text-black/20 text-sm">search</i>
                <input type="text" id="apiSearch" placeholder="SEARCH ENDPOINT..." class="w-full bg-black/5 border border-black/5 rounded-xl pl-11 pr-4 py-3 text-[10px] font-black tracking-widest outline-none focus:border-black/20 transition-all uppercase">
            </div>
            <div id="categoryContainer" class="flex gap-2 overflow-x-auto no-scrollbar w-full py-1">
                <button onclick="filterCategory('all', this)" class="category-pill active">All</button>
            </div>
        </div>

        <div id="apiContent" class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div class="col-span-full py-20 flex flex-col items-center opacity-20">
                <div class="w-8 h-8 border-2 border-black border-t-transparent rounded-full animate-spin mb-4"></div>
                <span class="text-[10px] font-black uppercase tracking-widest">Initialising Documents...</span>
            </div>
        </div>
    </main>

    <div id="toast" class="fixed top-6 left-1/2 -translate-x-1/2 -translate-y-20 opacity-0 transition-all duration-500 z-[100]">
        <div class="bg-black text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-3">
            <i class="material-icons text-white text-sm">check_circle</i>
            <span class="text-[10px] font-black uppercase tracking-widest">Action Success</span>
        </div>
    </div>

    <script>
        const rawStore = {};
        let activeTag = 'all';

        function showToast(msg) {
            const t = document.getElementById('toast');
            t.querySelector('span').textContent = msg;
            t.classList.remove('-translate-y-20', 'opacity-0');
            setTimeout(() => t.classList.add('-translate-y-20', 'opacity-0'), 2500);
        }

        async function trigger(cIdx, eIdx, method, path) {
            const key = `${cIdx}-${eIdx}`;
            const form = document.getElementById(`f-${key}`);
            const resultBox = document.getElementById(`r-${key}`);
            const resultContent = document.getElementById(`rc-${key}`);
            const btn = form.querySelector('button');
            
            resultBox.classList.remove('hidden');
            resultContent.innerHTML = `<div class="p-10 flex justify-center"><div class="w-5 h-5 border-2 border-black/10 border-t-black rounded-full animate-spin"></div></div>`;
            btn.disabled = true;

            const fd = new FormData(form);
            let url = path;
            const cfg = { method: method.toUpperCase() };

            if (cfg.method === 'GET') {
                const p = new URLSearchParams();
                for (const [k, v] of fd.entries()) if(v) p.append(k, v);
                if (p.toString()) url += (url.includes('?') ? '&' : '?') + p.toString();
            } else { cfg.body = fd; }

            try {
                const start = Date.now();
                const res = await fetch(url, cfg);
                const time = Date.now() - start;
                const type = res.headers.get('content-type') || '';
                let out = '';

                if (type.includes('image/')) {
                    const blob = await res.blob();
                    const bUrl = URL.createObjectURL(blob);
                    rawStore[key] = bUrl;
                    out = `<div class="p-6 bg-black/5 flex justify-center"><img src="${bUrl}" class="max-h-64 rounded-lg shadow-sm border border-black/5"></div>`;
                } else {
                    const text = await res.text();
                    try {
                        const json = JSON.parse(text);
                        rawStore[key] = json;
                        out = `<pre class="p-6 text-[10px] font-mono overflow-auto max-h-64 bg-black/5 text-black/70"><code>${JSON.stringify(json, null, 2)}</code></pre>`;
                    } catch {
                        rawStore[key] = text;
                        out = `<pre class="p-6 text-[10px] font-mono overflow-auto max-h-64 bg-black/5 text-black/70">${text}</pre>`;
                    }
                }

                resultContent.innerHTML = `
                    <div class="flex items-center justify-between px-6 py-3 border-b border-black/5 bg-black/[0.02]">
                        <span class="text-[9px] font-black text-black/30 uppercase tracking-widest">${res.status} HTTP â€¢ ${time}MS</span>
                        <button onclick="navigator.clipboard.writeText(typeof rawStore['${key}'] === 'string' ? rawStore['${key}'] : JSON.stringify(rawStore['${key}'])); showToast('COPIED TO CLIPBOARD')" class="text-[9px] font-black uppercase text-black/40 hover:text-black transition-colors">COPY RAW</button>
                    </div>
                    ${out}
                `;
            } catch (e) {
                resultContent.innerHTML = `<div class="p-8 text-center text-red-500 text-[10px] font-black uppercase tracking-widest">${e.message}</div>`;
            } finally {
                btn.disabled = false;
            }
        }

        function filterCategory(cat, btn) {
            activeTag = cat;
            document.querySelectorAll('.category-pill').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.querySelectorAll('.api-card-wrapper').forEach(s => {
                s.style.display = (cat === 'all' || s.dataset.tag === cat) ? 'block' : 'none';
            });
        }

        async function init() {
            const container = document.getElementById('apiContent');
            const catContainer = document.getElementById('categoryContainer');
            try {
                const res = await fetch('/src/openapi.json');
                const data = await res.json();
                const grouped = {};

                Object.keys(data.paths).forEach(p => {
                    Object.keys(data.paths[p]).forEach(m => {
                        const info = data.paths[p][m];
                        const tag = info.tags?.[0] || 'Uncategorized';
                        if(!grouped[tag]) grouped[tag] = [];
                        grouped[tag].push({ path: p, method: m, ...info });
                    });
                });

                let h = '';
                Object.entries(grouped).forEach(([tag, items], cIdx) => {
                    const catBtn = document.createElement('button');
                    catBtn.className = 'category-pill';
                    catBtn.textContent = tag;
                    catBtn.onclick = (e) => filterCategory(tag, e.target);
                    catContainer.appendChild(catBtn);

                    items.forEach((it, eIdx) => {
                        const key = `${cIdx}-${eIdx}`;
                        const m = it.method.toUpperCase();
                        const params = it.parameters || [];
                        h += `
                            <div class="api-card-wrapper animate-item" data-tag="${tag}" data-s="${it.path} ${it.summary}">
                                <div class="neo-card overflow-hidden h-full flex flex-col">
                                    <div class="p-8 flex-1">
                                        <div class="flex justify-between items-start mb-6">
                                            <span class="method-badge ${m === 'GET' ? 'get-badge' : 'post-badge'}">${m}</span>
                                            <span class="text-[8px] font-black text-black/20 uppercase tracking-[0.2em]">${tag}</span>
                                        </div>
                                        <h3 class="text-[13px] font-mono font-bold mb-2 text-black truncate">${it.path}</h3>
                                        <p class="text-[10px] text-black/40 mb-8 font-medium line-clamp-2">${it.summary || 'No detailed documentation available.'}</p>
                                        
                                        <form id="f-${key}" class="space-y-4">
                                            ${params.map(p => `
                                                <div class="space-y-2">
                                                    <label class="block text-[8px] font-black text-black/30 uppercase tracking-widest ml-1">${p.name} ${p.required ? '<span class="text-red-400">*</span>' : ''}</label>
                                                    <input type="text" name="${p.name}" class="w-full px-4 py-3 rounded-xl text-[10px] font-medium bg-black/5 border border-transparent focus:border-black/10 focus:bg-white outline-none transition-all" placeholder="Enter ${p.name}..." ${p.required ? 'required' : ''}>
                                                </div>
                                            `).join('')}
                                            <button type="button" onclick="trigger(${cIdx}, ${eIdx}, '${m}', '${it.path}')" class="w-full bg-black text-white py-4 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] hover:opacity-90 active:scale-[0.98] transition-all mt-4">
                                                Test Endpoint
                                            </button>
                                        </form>
                                    </div>
                                    <div id="r-${key}" class="hidden border-t border-black/5">
                                        <div id="rc-${key}"></div>
                                    </div>
                                </div>
                            </div>
                        `;
                    });
                });
                container.innerHTML = h;
            } catch (e) {
                container.innerHTML = `<div class="col-span-full py-20 text-center text-black/30 font-black uppercase text-[10px] tracking-widest">OpenAPI Schema Not Found</div>`;
            }
        }

        document.getElementById('apiSearch').oninput = function() {
            const v = this.value.toLowerCase();
            document.querySelectorAll('.api-card-wrapper').forEach(c => {
                const match = c.dataset.s.toLowerCase().includes(v);
                const tagMatch = activeTag === 'all' || c.dataset.tag === activeTag;
                c.style.display = (match && tagMatch) ? 'block' : 'none';
            });
        };

        window.addEventListener('load', init);
    </script>
</body>
</html>
